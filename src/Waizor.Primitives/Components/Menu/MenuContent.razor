@namespace Waizor.Primitives.Components.Internal
@inherits ComponentBase

@if (ElementReference.HasValue)
{
    <FocusTrap OnDeactivate="OnDeactivateAsync"
               ForTrigger="@(() => Menu.TriggerElementReference)"
               For="@(() => ElementReference.Value)"
               ClickOutsideDeactivates
               KeyboardNavigation="false" />
}

<RovingFocus For="@(() => ElementReference)" Orientation="@Orientation.Vertical" Loop="false">
    <PopperContent OnElementReferenceChanged="OnElementReferenceChanged"
                   Side="Side"
                   SideOffset="SideOffset"
                   Align="Align"
                   AlignOffset="AlignOffset"
                   ArrowPadding="ArrowPadding"
                   role="menu"
                   data-state="@Menu.State.ToString().ToLowerInvariant()"
                   data-orientation="@Orientation.Vertical.ToString().ToLowerInvariant()">
        @ChildContent
    </PopperContent>
</RovingFocus>